function e(e,n){for(var i=0;i<n.length;i++){var s=n[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,t(s.key),s)}}function n(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function t(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}var i=null,s=!1,r=new Set,u=null;function o(e,n){(u=e)._tempActiveUpdateFnName=n||"queuedUpdate"}function c(){u=null}function f(){return u}var a=/*#__PURE__*/function(){function e(e){this._value=void 0,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this._value=e}var t=e.prototype;return t.peek=function(){return this._value},t.update=function(){this.notify(),this.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}),this.subscribers.forEach(function(e){e.computedInstance&&e.computedInstance.subscribers.forEach(function(e){e.done=!1}),e.done=!1})},t.subscribe=function(e){this.subscribers.add(e)},t.unsubscribe=function(e){this.subscribers.delete(e)},t.notify=function(){s?this.subscribers.forEach(function(e){return r.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){"function"!=typeof e||e.done||(e.done=!0,e())}),this.notifying=!1)},n(e,[{key:"value",get:function(){this.notifying||i&&(i.run&&this.subscribe(i.run),i.addDependency(this));var e=f();return e&&this.depsComponents.add(e),this._value},set:function(e){e!==this._value&&(this._value=e,this.update())}}])}(),d=/*#__PURE__*/function(){function e(e){var n=this;this.computeFn=void 0,this._value=void 0,this.dependencies=new Set,this.subscribers=new Set,this.depsComponents=new Set,this.notifying=!1,this.recompute=function(){var e=n.compute();e!==n._value&&(n._value=e,n.notify(),n.depsComponents.forEach(function(e){var n;return null==(n=e[e._tempActiveUpdateFnName])?void 0:n.call(e)}))},this.computeFn=e,this._value=this.compute()}var t=e.prototype;return t.peek=function(){return this._value},t.compute=function(){var e=i;i=this;var n=this.computeFn();return i=e,n},t.subscribe=function(e){e&&this.subscribers.add(e)},t.unsubscribe=function(e){this.subscribers.delete(e)},t.notify=function(){s?this.subscribers.forEach(function(e){return r.add(e)}):(this.notifying=!0,this.subscribers.forEach(function(e){e.done||(e.done=!0,e())}),this.notifying=!1)},t.addDependency=function(e){this.dependencies.add(e),e.subscribe(this.recompute),this.recompute.computedInstance=this},n(e,[{key:"value",get:function(){this.notifying||i&&(this.subscribe(i.run),i.addDependency(this));var e=f();return e&&this.depsComponents.add(e),this._value}}])}(),h=/*#__PURE__*/function(){function e(e){var n=this;this.effectFn=void 0,this.dependencies=new Set,this.disposed=!1,this.run=function(){if(!n.disposed){var e=i;i=n,n.effectFn(),i=e}},this.effectFn=e,this.run()}var n=e.prototype;return n.addDependency=function(e){this.disposed||(this.dependencies.add(e),this.run.effectInstance=this,e.subscribe(this.run))},n.cleanup=function(){var e=this;this.dependencies.forEach(function(n){return n.unsubscribe(e.run)}),this.dependencies.clear()},n.dispose=function(){this.cleanup(),this.disposed=!0},e}();function p(e){return new a(e)}function b(e){return new d(e)}function v(e){var n=new h(e);return function(){return n.dispose()}}function l(e){s=!0;try{e()}finally{s=!1,r.forEach(function(e){e.done||(e.done=!0,e())}),r.forEach(function(e){e.done=!1}),r.clear()}}function y(e){return Object.entries(e).reduce(function(e,n){return e[n[0]]=p(n[1]),e},{})}export{l as batch,c as clearActiveComponent,b as computed,v as effect,f as getActiveComponent,o as setActiveComponent,p as signal,y as signalObject};
//# sourceMappingURL=index.module.js.map
